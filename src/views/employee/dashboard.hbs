<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        {{> employee-sidebar employee=employee active='dashboard'}}

        <!-- Main Content -->
        <div class="col-md-10 emp-main">
            <div class="emp-page-header">
                <h1 class="emp-page-title">Dashboard</h1>
                <p class="text-muted mt-1">Welcome back, {{employee.firstName}}!</p>
            </div>

            <!-- Employee Info Card -->
            <div class="emp-card mb-4">
                <div class="emp-card-body">
                    <div class="row align-items-center gx-3">
                        <div class="col-auto">
                            <div class="emp-profile-avatar" style="width: 74px; height: 74px; font-size: 30px; background: linear-gradient(135deg,#0ea5a6 0%, #06b6d4 100%); color: #fff; display:flex;align-items:center;justify-content:center;border-radius:12px;">
                                {{employee.firstName.[0]}}{{employee.lastName.[0]}}
                            </div>
                        </div>

                        <div class="col-auto" style="min-width:320px;">
                            <div style="display:flex;flex-direction:column;gap:6px;">
                                <div style="font-size:18px;font-weight:800;color:#0f172a;">{{employee.empName}}</div>
                                <div style="font-size:13px;color:#64748b;">{{employee.empDesignation}} • {{employee.empDepartment}}</div>
                                <div style="margin-top:4px;">
                                    {{#if employee.shiftName}}
                                        <div style="display:inline-flex;align-items:center;gap:10px;padding:8px 12px;border-radius:12px;background:linear-gradient(90deg,#f8fafc,#ffffff);border:1px solid rgba(2,6,23,0.04);box-shadow:0 6px 18px rgba(2,6,23,0.04);">
                                            <div style="width:44px;height:44px;border-radius:10px;background:linear-gradient(180deg,#eef2ff,#dbeafe);display:flex;align-items:center;justify-content:center;color:#075985;font-size:18px;">
                                                <i class="fa-solid fa-clock"></i>
                                            </div>
                                            <div style="text-align:left;">
                                                <div style="font-weight:700;color:#0f172a;">{{employee.shiftName}}</div>
                                                <div style="font-size:12px;color:#64748b;margin-top:2px;">{{employee.shiftStartTime}} — {{employee.shiftEndTime}}</div>
                                            </div>
                                        </div>
                                    {{else}}
                                        <div style="display:inline-block;padding:8px 12px;border-radius:10px;background:#fff7ed;border:1px solid rgba(249,115,22,0.06);">
                                            <span style="font-weight:700;color:#f97316;">No shift assigned</span>
                                        </div>
                                    {{/if}}
                                </div>
                            </div>
                        </div>

                        <div class="col text-end">
                            <div style="font-size:12px;color:#94a3b8;">Business</div>
                            <div style="font-weight:700;color:#0f172a;">{{business.name}}</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Leave Balances -->
            <div class="emp-card mb-4">
                <div class="emp-card-header">
                    <h5 class="emp-card-title">
                        <i class="fa-solid fa-wallet" style="color: var(--emp-primary);"></i>
                        Leave Balances
                    </h5>
                    <a href="/employee/leaves" class="btn emp-btn-secondary btn-sm">
                        View All <i class="fa-solid fa-arrow-right ms-1"></i>
                    </a>
                </div>
                <div class="emp-card-body">
                    <div class="row g-3">
                        {{#each leaveStats.balances}}
                        <div class="col-md-2 col-sm-4 col-6">
                            <div class="leave-balance-card">
                                <div class="leave-balance-type" style="color: {{this.color}};">
                                    {{this.leaveTypeName}}
                                </div>
                                <div class="leave-balance-value" style="color: {{this.color}};">
                                    {{this.available}}
                                </div>
                                <div class="leave-balance-label">Available</div>
                                <div class="mt-2" style="font-size: 11px; color: #94a3b8;">
                                    Used: {{this.used}} / {{this.allocated}}
                                </div>
                            </div>
                        </div>
                        {{/each}}
                    </div>
                </div>
            </div>

            <div class="row">
                <!-- Recent Requests -->
                <div class="col-md-6 mb-4">
                    <div class="emp-card h-100">
                        <div class="emp-card-header">
                            <h5 class="emp-card-title">
                                <i class="fa-solid fa-history" style="color: var(--emp-primary);"></i>
                                Recent Requests
                            </h5>
                        </div>
                        <div class="emp-card-body p-0">
                            {{#if recentRequests.length}}
                            <table class="emp-table mb-0">
                                <tbody>
                                    {{#each recentRequests}}
                                    <tr>
                                        <td>
                                            <div style="font-weight: 600;">{{this.leaveType}}</div>
                                            <small class="text-muted">{{this.startDate}} - {{this.endDate}}</small>
                                        </td>
                                        <td class="text-center">
                                            <span style="font-weight: 700;">{{this.totalDays}}</span>
                                            <small class="text-muted d-block">days</small>
                                        </td>
                                        <td class="text-end">
                                            <span
                                                class="emp-badge {{#if (eq this.status 'PENDING')}}emp-badge-pending{{/if}}{{#if (eq this.status 'APPROVED')}}emp-badge-approved{{/if}}{{#if (eq this.status 'REJECTED')}}emp-badge-rejected{{/if}}{{#if (eq this.status 'CANCELED')}}emp-badge-canceled{{/if}}">
                                                {{this.status}}
                                            </span>
                                        </td>
                                    </tr>
                                    {{/each}}
                                </tbody>
                            </table>
                            {{else}}
                            <div class="text-center py-4 text-muted">
                                <i class="fa-solid fa-inbox fa-2x mb-2"></i>
                                <p class="mb-0">No recent requests</p>
                            </div>
                            {{/if}}
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="col-md-6 mb-4">
                    <div class="emp-card h-100">
                        <div class="emp-card-header">
                            <h5 class="emp-card-title">
                                <i class="fa-solid fa-bolt" style="color: var(--emp-primary);"></i>
                                Quick Actions
                            </h5>
                        </div>
                        <div class="emp-card-body">
                            <div class="row g-3">
                                <div class="col-12">
                                    <a href="/employee/leaves/apply" class="quick-action">
                                        <div class="quick-action-icon"
                                            style="background: linear-gradient(135deg, #22c55e 0%, #10b981 100%);">
                                            <i class="fa-solid fa-plus"></i>
                                        </div>
                                        <div>
                                            <div class="quick-action-text">Apply Leave</div>
                                            <small class="text-muted">Submit a new leave request</small>
                                        </div>
                                    </a>
                                </div>
                                <div class="col-12">
                                    <a href="/employee/leaves" class="quick-action">
                                        <div class="quick-action-icon"
                                            style="background: linear-gradient(135deg, var(--emp-primary) 0%, #06b6d4 100%);">
                                            <i class="fa-solid fa-list"></i>
                                        </div>
                                        <div>
                                            <div class="quick-action-text">My Leaves</div>
                                            <small class="text-muted">View all leave requests</small>
                                        </div>
                                    </a>
                                </div>
                                <div class="col-12">
                                    <a href="/employee/leaves?status=PENDING" class="quick-action">
                                        <div class="quick-action-icon"
                                            style="background: linear-gradient(135deg, #f59e0b 0%, #f97316 100%);">
                                            <i class="fa-solid fa-clock"></i>
                                        </div>
                                        <div>
                                            <div class="quick-action-text">Pending Requests</div>
                                            <small class="text-muted">View pending leave requests</small>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {{#if upcomingLeaves.length}}
            <!-- Upcoming Leaves -->
            <div class="emp-card">
                <div class="emp-card-header">
                    <h5 class="emp-card-title">
                        <i class="fa-solid fa-calendar-alt" style="color: var(--emp-primary);"></i>
                        Upcoming Leaves
                    </h5>
                </div>
                <div class="emp-card-body p-0">
                    <table class="emp-table mb-0">
                        <thead>
                            <tr>
                                <th>Leave Type</th>
                                <th>From</th>
                                <th>To</th>
                                <th>Days</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{#each upcomingLeaves}}
                            <tr>
                                <td>
                                    <span style="color: {{this.leaveTypeColor}}; font-weight: 600;">
                                        <i class="fa-solid fa-circle me-1" style="font-size: 8px;"></i>
                                        {{this.leaveType}}
                                    </span>
                                </td>
                                <td>{{this.startDate}}</td>
                                <td>{{this.endDate}}</td>
                                <td><strong>{{this.totalDays}}</strong></td>
                            </tr>
                            {{/each}}
                        </tbody>
                    </table>
                </div>
            </div>
            {{/if}}
        </div>
    </div>
<<<<<<< HEAD
</div>

<!-- Include Employee Dashboard Real-time Sync Script -->
<script src="/assets/js/employee-dashboard.js"></script>
=======
</div>
>>>>>>> df1b9e7beba8f0d196d1a3608751ce523c54211e
