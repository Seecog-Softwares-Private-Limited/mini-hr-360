<div class="container-fluid">
    <div class="row">
        {{> employee-sidebar employee=employee active='attendance_calendar'}}

        <!-- Main Content -->
        <div class="col-md-10 emp-main">
            <div class="emp-page-header">
                <h1 class="emp-page-title">Attendance Calendar</h1>
                <p class="text-muted mt-1">Your monthly attendance summary</p>
            </div>

            <!-- Monthly Stats -->
            <div class="row g-3 mb-4">
                <div class="col-md-3 col-sm-6">
                    <div class="emp-card">
                        <div class="emp-card-body text-center">
                            <div style="font-size: 32px; color: #22c55e; margin-bottom: 8px;">
                                <i class="fa-solid fa-check-circle"></i>
                            </div>
                            <div style="font-size: 24px; font-weight: 700; color: #1e293b;">18</div>
                            <div style="font-size: 13px; color: #94a3b8; margin-top: 4px;">Days Present</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6">
                    <div class="emp-card">
                        <div class="emp-card-body text-center">
                            <div style="font-size: 32px; color: #ef4444; margin-bottom: 8px;">
                                <i class="fa-solid fa-times-circle"></i>
                            </div>
                            <div style="font-size: 24px; font-weight: 700; color: #1e293b;">2</div>
                            <div style="font-size: 13px; color: #94a3b8; margin-top: 4px;">Days Absent</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6">
                    <div class="emp-card">
                        <div class="emp-card-body text-center">
                            <div style="font-size: 32px; color: #f59e0b; margin-bottom: 8px;">
                                <i class="fa-solid fa-hourglass"></i>
                            </div>
                            <div style="font-size: 24px; font-weight: 700; color: #1e293b;">1</div>
                            <div style="font-size: 13px; color: #94a3b8; margin-top: 4px;">Pending</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6">
                    <div class="emp-card">
                        <div class="emp-card-body text-center">
                            <div style="font-size: 32px; color: var(--emp-primary); margin-bottom: 8px;">
                                <i class="fa-solid fa-percent"></i>
                            </div>
                            <div style="font-size: 24px; font-weight: 700; color: #1e293b;">90%</div>
                            <div style="font-size: 13px; color: #94a3b8; margin-top: 4px;">Attendance Rate</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Calendar Card -->
            <div class="emp-card">
                <div class="emp-card-header">
                    <h5 class="emp-card-title">
                        <i class="fa-solid fa-calendar" style="color: var(--emp-primary);"></i>
                        January 2026
                    </h5>
                    <a href="/employee/attendance/regularization_form" class="btn emp-btn-secondary btn-sm">
                        <i class="fa-solid fa-pen me-1"></i> Request Regularization
                    </a>
                </div>
                <div class="emp-card-body">
                    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet" />
                    <div id="calendar" style="margin: 0; padding: 0;"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const calendarEl = document.getElementById('calendar');
  const calendar = new FullCalendar.Calendar(calendarEl, {
    initialView: 'dayGridMonth',
    headerToolbar: {
      left: 'prev,next today',
      center: 'title',
      right: 'dayGridMonth,listMonth'
    },
    events: {{{json events}}} || [],
    eventDisplay: 'block',
    height: 'auto',
    contentHeight: 'auto',
    selectable: true,
    selectConstraint: 'businessHours',
    editable: false,
    eventClick: function(info) {
      alert('Attendance: ' + info.event.title + ' on ' + info.event.startStr);
    },
    dayCellDidMount: function(arg) {
      arg.el.style.height = 'auto';
      arg.el.style.minHeight = '100px';
    }
  });
  calendar.render();
});
</script>
