{{!-- Employee Salary Details --}}
<div class="container-fluid">
	<div class="row">
		{{> employee-sidebar employee=employee active='payroll_salary_details'}}

		<!-- Main Content -->
		<div class="col-md-10 emp-main">
			<div class="emp-page-header">
				<h1 class="emp-page-title">Salary Details</h1>
				<p class="text-muted mt-1">View your current salary structure and breakdown</p>
			</div>

			{{#if salaryDetails.structure}}
				<!-- Structure Overview -->
				<div class="emp-card mb-4">
					<div class="emp-card-header">
						<h5 class="emp-card-title">
							<i class="fa-solid fa-chart-pie" style="color: var(--emp-primary);"></i>
							{{salaryDetails.structure.name}}
						</h5>
						<small class="text-muted">Effective from {{salaryDetails.structure.effectiveDate}}</small>
					</div>
					<div class="emp-card-body">
						<div class="row g-3 text-center mb-4">
							<div class="col-md-3">
								<div style="padding: 15px; background: #f0f7ff; border-radius: 8px;">
									<small class="text-muted">Monthly CTC</small>
									<div style="font-size: 20px; font-weight: 700; color: var(--emp-primary);">₹{{salaryDetails.structure.monthlyCTC}}</div>
								</div>
							</div>
							<div class="col-md-3">
								<div style="padding: 15px; background: #f0f7ff; border-radius: 8px;">
									<small class="text-muted">Annual CTC</small>
									<div style="font-size: 20px; font-weight: 700; color: var(--emp-primary);">₹{{salaryDetails.structure.annualCTC}}</div>
								</div>
							</div>
							<div class="col-md-3">
								<div style="padding: 15px; background: #f0fdf4; border-radius: 8px;">
									<small class="text-muted">Gross Pay</small>
									<div style="font-size: 20px; font-weight: 700; color: var(--emp-success);">₹{{salaryDetails.structure.grossPay}}</div>
								</div>
							</div>
							<div class="col-md-3">
								<div style="padding: 15px; background: #fef2f2; border-radius: 8px;">
									<small class="text-muted">Net Pay</small>
									<div style="font-size: 20px; font-weight: 700; color: var(--emp-danger);">₹{{salaryDetails.structure.netPay}}</div>
								</div>
							</div>
						</div>

						<div style="padding: 12px; background: #f5f5f5; border-left: 3px solid var(--emp-primary); border-radius: 4px;">
							<small class="text-muted">{{salaryDetails.structure.description}}</small>
						</div>
					</div>
				</div>

				<!-- Earnings Breakdown -->
				<div class="emp-card mb-4">
					<div class="emp-card-header">
						<h5 class="emp-card-title">
							<i class="fa-solid fa-arrow-up" style="color: var(--emp-success);"></i>
							Earnings (Monthly)
						</h5>
					</div>
					<div class="emp-card-body">
						<div class="table-responsive">
							<table class="table table-hover mb-0">
								<thead class="table-light">
									<tr>
										<th>Component</th>
										<th>Amount</th>
										<th>Taxable</th>
									</tr>
								</thead>
								<tbody>
									{{#each salaryDetails.earnings}}
									<tr>
										<td>
											<strong>{{this.name}}</strong>
											<small class="d-block text-muted">{{this.description}}</small>
										</td>
										<td><strong>₹{{this.amount}}</strong></td>
										<td>
											{{#if this.taxable}}
												<span class="badge bg-light text-dark">Yes</span>
											{{else}}
												<span class="badge bg-secondary">No</span>
											{{/if}}
										</td>
									</tr>
									{{/each}}
								</tbody>
								<tfoot class="table-light">
									<tr>
										<td><strong>Total Earnings</strong></td>
										<td colspan="2"><strong>₹{{salaryDetails.totalEarnings}}</strong></td>
									</tr>
								</tfoot>
							</table>
						</div>
					</div>
				</div>

				<!-- Deductions Breakdown -->
				<div class="emp-card mb-4">
					<div class="emp-card-header">
						<h5 class="emp-card-title">
							<i class="fa-solid fa-arrow-down" style="color: var(--emp-danger);"></i>
							Deductions (Monthly)
						</h5>
					</div>
					<div class="emp-card-body">
						<div class="table-responsive">
							<table class="table table-hover mb-0">
								<thead class="table-light">
									<tr>
										<th>Component</th>
										<th>Amount</th>
										<th>Note</th>
									</tr>
								</thead>
								<tbody>
									{{#each salaryDetails.deductions}}
									<tr>
										<td>
											<strong>{{this.name}}</strong>
											<small class="d-block text-muted">{{this.description}}</small>
										</td>
										<td><strong>₹{{this.amount}}</strong></td>
										<td><small class="text-muted">{{this.note}}</small></td>
									</tr>
									{{/each}}
								</tbody>
								<tfoot class="table-light">
									<tr>
										<td><strong>Total Deductions</strong></td>
										<td colspan="2"><strong>₹{{salaryDetails.totalDeductions}}</strong></td>
									</tr>
								</tfoot>
							</table>
						</div>
					</div>
				</div>

				<!-- Summary Card -->
				<div class="emp-card mb-4">
					<div class="emp-card-header">
						<h5 class="emp-card-title">
							<i class="fa-solid fa-calculator" style="color: var(--emp-primary);"></i>
							Salary Summary
						</h5>
					</div>
					<div class="emp-card-body">
						<div class="row g-3">
							<div class="col-md-6">
								<div style="padding: 15px; border: 1px solid #e5e7eb; border-radius: 8px;">
									<small class="text-muted d-block mb-2">Basic Salary</small>
									<div style="font-size: 18px; font-weight: 700;">₹{{salaryDetails.basic}}</div>
									<small class="text-muted d-block mt-1">{{ salaryDetails.basicPercentage }}% of CTC</small>
								</div>
							</div>
							<div class="col-md-6">
								<div style="padding: 15px; border: 1px solid #e5e7eb; border-radius: 8px;">
									<small class="text-muted d-block mb-2">Total Allowances</small>
									<div style="font-size: 18px; font-weight: 700;">₹{{salaryDetails.allowances}}</div>
									<small class="text-muted d-block mt-1">{{ salaryDetails.allowancesPercentage }}% of CTC</small>
								</div>
							</div>
							<div class="col-md-6">
								<div style="padding: 15px; border: 1px solid #e5e7eb; border-radius: 8px;">
									<small class="text-muted d-block mb-2">Statutory Deductions</small>
									<div style="font-size: 18px; font-weight: 700;">₹{{salaryDetails.statutoryDeductions}}</div>
									<small class="text-muted d-block mt-1">PF, ESI, PT, TDS</small>
								</div>
							</div>
							<div class="col-md-6">
								<div style="padding: 15px; border: 1px solid #e5e7eb; border-radius: 8px;">
									<small class="text-muted d-block mb-2">Take-Home Pay (Monthly)</small>
									<div style="font-size: 18px; font-weight: 700; color: var(--emp-primary);">₹{{salaryDetails.takeHome}}</div>
									<small class="text-muted d-block mt-1">After all deductions</small>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!-- Last Revision Info -->
				<div class="alert alert-light">
					<i class="fa-solid fa-clock me-2"></i>
					<strong>Last Revision:</strong> {{salaryDetails.lastRevision}}
				</div>

			{{else}}

				<!-- Empty State -->
				<div class="emp-card">
					<div class="emp-card-body text-center py-5">
						<i class="fa-solid fa-inbox" style="font-size: 48px; opacity: 0.3; display: block; margin-bottom: 15px;"></i>
						<h6>No Salary Structure Assigned</h6>
						<p class="text-muted mb-3">A salary structure hasn't been assigned to you yet. Please contact HR for more information.</p>
					</div>
				</div>

			{{/if}}
		</div>
	</div>
</div>
